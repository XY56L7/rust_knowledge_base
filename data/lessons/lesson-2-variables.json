{
  "id": "lesson-2-variables",
  "title": "Variables and Immutability",
  "description": "Learn how variables work in Rust and why they are immutable by default.",
  "content": "# Variables and Immutability\n\nIn Rust, variables are **immutable** (unchangeable) by default. This means that a variable's value cannot be modified unless we explicitly mark it with the `mut` keyword.\n\n## Basic Syntax\n\n```rust\nlet x = 5;        // immutable variable\nlet mut y = 10;   // mutable (changeable) variable\n```\n\n## Why Immutable by Default?\n\nThis design decision provides several advantages:\n- **Safety**: Reduces the possibility of accidental modifications\n- **Concurrent Programming**: Easier to write safe code\n- **Readability**: Clear which variables can be modified\n\n## Shadowing\n\nRust allows **shadowing**, when we create a new variable with the same name:\n\n```rust\nlet x = 5;\nlet x = x + 1;  // new variable, not modification\n```\n\nThis is different from `mut`, because it creates a completely new variable.",
  "difficulty": "beginner",
  "estimatedTime": 20,
  "prerequisites": [
    "lesson-1-introduction"
  ],
  "codeExamples": [
    {
      "id": "ex-2-1-immutable",
      "title": "Immutable Variable",
      "description": "Example of an immutable variable",
      "code": "fn main() {\n    let x = 5;\n    println!(\"x value: {}\", x);\n}",
      "explanation": "The `x` variable is immutable, so it cannot be modified. If we try to modify it, the compiler will signal an error.",
      "language": "rust"
    },
    {
      "id": "ex-2-1-blockchain-immutable",
      "title": "Blockchain: Immutable Address",
      "description": "Using immutability for blockchain addresses",
      "code": "fn main() {\n    let wallet_address = \"0x742d35Cc6634C0532925a3b844Bc9e7595f0bEb\";\n    println!(\"Wallet address: {}\", wallet_address);\n}",
      "explanation": "In blockchain, addresses and other identifiers should be immutable to prevent accidental changes that could lead to security issues.",
      "language": "rust"
    },
    {
      "id": "ex-2-2-mutable",
      "title": "Mutable Variable",
      "description": "Example of a mutable variable",
      "code": "fn main() {\n    let mut x = 5;\n    println!(\"Original value: {}\", x);\n    x = 6;\n    println!(\"New value: {}\", x);\n}",
      "explanation": "A variable marked with the `mut` keyword is mutable. This allows us to assign a new value to it.",
      "language": "rust"
    },
    {
      "id": "ex-2-2-blockchain-balance",
      "title": "Blockchain: Mutable Balance",
      "description": "Using mutability for changing balances",
      "code": "fn main() {\n    let mut account_balance: u64 = 1000;\n    println!(\"Initial balance: {} tokens\", account_balance);\n    account_balance += 500;\n    println!(\"After receiving: {} tokens\", account_balance);\n    account_balance -= 200;\n    println!(\"After sending: {} tokens\", account_balance);\n}",
      "explanation": "In blockchain, account balances must be mutable because they change with each transaction. The `mut` keyword allows us to update the balance.",
      "language": "rust"
    },
    {
      "id": "ex-2-3-shadowing",
      "title": "Shadowing Example",
      "description": "How shadowing works",
      "code": "fn main() {\n    let x = 5;\n    let x = x + 1;\n    let x = x * 2;\n    println!(\"x value: {}\", x);\n}",
      "explanation": "Shadowing allows us to create a new variable with the same name. Each `let` creates a new variable that shadows the previous one.",
      "language": "rust"
    }
  ],
  "exercises": [
    {
      "id": "exercise-2-1",
      "title": "Variable Modification",
      "description": "Create a mutable variable that you modify!",
      "starterCode": "fn main() {\n}",
      "solution": "fn main() {\n    let mut number = 10;\n    number = 20;\n    println!(\"The number: {}\", number);\n}",
      "hints": [
        "Use the `mut` keyword",
        "Assign a new value to the variable"
      ],
      "difficulty": "easy"
    },
    {
      "id": "exercise-2-2",
      "title": "Blockchain: Track Balance",
      "description": "Create a mutable balance variable and simulate transactions!",
      "starterCode": "fn main() {\n}",
      "solution": "fn main() {\n    let mut balance: u64 = 1000;\n    balance += 250;\n    balance -= 150;\n    println!(\"Final balance: {} tokens\", balance);\n}",
      "hints": [
        "Use `mut` for the balance variable",
        "Use += to add and -= to subtract"
      ],
      "difficulty": "easy"
    }
  ],
  "projectIdeas": [
    {
      "id": "project-2-1",
      "title": "Simple Wallet Balance Tracker",
      "description": "Create a program that tracks cryptocurrency wallet balances. Use mutable variables to update balances when receiving or sending tokens.",
      "difficulty": "easy",
      "estimatedTime": 2,
      "requirements": [
        "Create mutable variables for wallet balances",
        "Simulate receiving tokens (increase balance)",
        "Simulate sending tokens (decrease balance)",
        "Display balance after each transaction",
        "Handle at least 2 different tokens (e.g., ETH and BTC)"
      ],
      "hints": [
        "Use mut keyword for changing balances",
        "Use += for receiving, -= for sending",
        "Print balance after each operation"
      ],
      "extensions": [
        "Add transaction history",
        "Calculate total portfolio value",
        "Add validation (prevent negative balances)",
        "Support multiple wallets"
      ],
      "learningOutcomes": [
        "Understand mutability in Rust",
        "Practice with arithmetic operations",
        "Learn variable shadowing concepts",
        "Work with different numeric types"
      ]
    },
    {
      "id": "project-2-2",
      "title": "Block Height Calculator",
      "description": "Build a program that calculates blockchain block height over time. Use variables to track current block, block time, and calculate future block heights.",
      "difficulty": "easy",
      "estimatedTime": 1,
      "requirements": [
        "Create variables for current block height",
        "Store block time (seconds per block)",
        "Calculate future block height after X seconds",
        "Use shadowing to update block height"
      ],
      "hints": [
        "Use immutable variables for constants (block time)",
        "Use mutable or shadowing for changing block height",
        "Calculate: future_height = current + (seconds / block_time)"
      ],
      "extensions": [
        "Calculate block height for specific date",
        "Add multiple blockchain support (different block times)",
        "Display estimated time until target block"
      ],
      "learningOutcomes": [
        "Practice with variables and mutability",
        "Understand shadowing vs mutation",
        "Work with calculations",
        "Learn Rust's type system basics"
      ]
    },
    {
      "id": "project-2-3",
      "title": "Transaction Fee Calculator",
      "description": "Create a calculator that computes transaction fees based on gas price and gas limit. Practice with immutable constants and mutable calculations.",
      "difficulty": "easy",
      "estimatedTime": 1,
      "requirements": [
        "Define gas price as immutable constant",
        "Use mutable variable for gas limit",
        "Calculate total fee (gas_price * gas_limit)",
        "Convert between wei and ETH",
        "Display results in both units"
      ],
      "hints": [
        "Use const for gas price (doesn't change)",
        "Use mut for gas limit (user input)",
        "1 ETH = 1e18 wei",
        "Use type casting for conversions"
      ],
      "extensions": [
        "Support multiple gas price tiers",
        "Calculate fees for different transaction types",
        "Add gas optimization suggestions"
      ],
      "learningOutcomes": [
        "Understand const vs let",
        "Practice with mutability",
        "Work with large numbers",
        "Learn type conversions"
      ]
    }
  ]
}
